      {{ header }}
      <style>
        .input_wrapper__input-err label {
          color: #ff0101;
          font-size: 12px;
        }
        #visionСheck.modal_page__form {
          gap: 0.4em;
          text-align: left;
        }
      </style>
      <section class="modal_page modal_page-form">
        <div class="modal_page__container modal_page__container--center">
          <div class="section_block section_block--center">
            <h1 class="section_block__title">
              Записаться <br> на бесплатную проверку зрения
            </h1>
            <p class="section_block__text">Оставьте свои контакты, мы перезвоним и предложим удобное вам время.</p>
            <form id="visionСheck" class="modal_page__form form ajax_form" action="javascript();">
              <input type="hidden" name="form" value="Записаться на бесплатную проверку зрения">
              <div class="input_wrapper input_wrapper--outlined" data-input-wrapper="">
                <input class="input_wrapper__input" type="text" name="name"  autocomplete="off">
                <label class="input_wrapper__label">Ваше имя</label>
                <div class="input_wrapper__tooltip" data-input-tooltip="">
                  <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.8334 5.00065V11.6673H9.16671V5.00065H10.8334Z" fill="#FF0101"></path>
                    <path d="M9.16671 13.334H10.8417V15.0007H9.16671V13.334Z" fill="#FF0101"></path>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0.833374 10.0007C0.833374 4.93804 4.93743 0.833984 10 0.833984C15.0627 0.833984 19.1667 4.93804 19.1667 10.0007C19.1667 15.0633 15.0627 19.1673 10 19.1673C4.93743 19.1673 0.833374 15.0633 0.833374 10.0007ZM10 2.50065C5.85791 2.50065 2.50004 5.85852 2.50004 10.0007C2.50004 14.1428 5.85791 17.5007 10 17.5007C14.1422 17.5007 17.5 14.1428 17.5 10.0007C17.5 5.85852 14.1422 2.50065 10 2.50065Z" fill="#FF0101"></path>
                  </svg>
                </div>
              </div>
              <p class="input_wrapper__input-err"></p>
              <div class="input_wrapper input_wrapper--outlined" data-input-wrapper="">
                <input class="input_wrapper__input" type="tel" name="phone"  autocomplete="off">
                <label class="input_wrapper__label">Номер телефона</label>
                <div class="input_wrapper__tooltip" data-input-tooltip="">
                  <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.8334 5.00065V11.6673H9.16671V5.00065H10.8334Z" fill="#FF0101"></path>
                    <path d="M9.16671 13.334H10.8417V15.0007H9.16671V13.334Z" fill="#FF0101"></path>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M0.833374 10.0007C0.833374 4.93804 4.93743 0.833984 10 0.833984C15.0627 0.833984 19.1667 4.93804 19.1667 10.0007C19.1667 15.0633 15.0627 19.1673 10 19.1673C4.93743 19.1673 0.833374 15.0633 0.833374 10.0007ZM10 2.50065C5.85791 2.50065 2.50004 5.85852 2.50004 10.0007C2.50004 14.1428 5.85791 17.5007 10 17.5007C14.1422 17.5007 17.5 14.1428 17.5 10.0007C17.5 5.85852 14.1422 2.50065 10 2.50065Z" fill="#FF0101"></path>
                  </svg>
                </div>
              </div>
              <p class="input_wrapper__input-err"></p>
              <button class="footer_table__form_btn btn btn--filled btn--icon_right">
                <span class="btn__text">Заказать обратный звонок</span>
                <svg class="btn__icon btn__icon--white btn__icon--right" type="submit">
                  <use xlink:href="#icon_send"></use>
                </svg>
              </button>
            </form>
          </div>
        </div>
        <button class="modal_page__button modal_page__button--absolute" data-history-back="">Вернуться назад</button>
      </section>
      <section class="modal_page modal_page-success">
        <div class="modal_page__container modal_page__container--center">
          <div class="section_block section_block--center">
            <h1 class="section_block__title">Спасибо!</h1>
            <p class="section_block__text">Ваша заявка отправлена. Ожидайте от нас обратной связи.</p>
            <a href="/" class="modal_page__success_btn btn btn--grey" data-history-back=""><span class="btn__text">На главную</span></a>
          </div>
        </div>
      </section>   
      </main>
      </div>

      <script src="https://polyfill.io/v3/polyfill.js?features=IntersectionObserver"></script>
      <script src="catalog/view/theme/mt/js/app.js" type="text/javascript"></script>
      {% for style in styles %}
      <link href="{{ style.href }}" type="text/css" rel="{{ style.rel }}" media="{{ style.media }}" />
      {% endfor %}
      <link media="none" onload="if(media!='all')media='all'" rel="stylesheet"
          href="catalog/view/theme/mt/stylesheet/fonts.css">
      <link media="none" onload="if(media!='all')media='all'" rel="stylesheet"
          href="catalog/view/theme/mt/stylesheet/fontawesome.min.css">
      <link media="none" onload="if(media!='all')media='all'" rel="stylesheet"
          href="catalog/view/theme/mt/stylesheet/fancybox.css">
      <link media="none" onload="if(media!='all')media='all'" rel="stylesheet"
          href="catalog/view/theme/mt/stylesheet/forms.css">
      <link media="none" onload="if(media!='all')media='all'" rel="stylesheet"
          href="catalog/view/theme/mt/stylesheet/custom.css">
      <link media="none" onload="if(media!='all')media='all'" rel="stylesheet"
          href="catalog/view/theme/mt/stylesheet/article.css">
      <link media="none" onload="if(media!='all')media='all'" rel="stylesheet"
          href="catalog/view/theme/mt/stylesheet/footer.css">



      <script src="catalog/view/theme/mt/js/fancybox.umd.js" async defer></script>
      <script src="catalog/view/theme/mt/js/device.js" async defer></script>
      <script src="catalog/view/theme/mt/js/scripts.js"></script>


      {% for script in scripts %}
      <script src="{{ script }}" type="text/javascript"></script>
      {% endfor %}

      <!-- Мобильные таблицы и удаление лишних параграфов -->
      <script type='text/javascript'>
          $(function () {
              $('table').wrap('<div class="table-scrolling"></div>');
          });
      </script>

      <script type='text/javascript'>
          $(function () {
              $("td p").replaceWith(function () {
                  return this.innerHTML
              })
          });
      </script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js" integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <script type="text/javascript">

      function formValidate() {
        $('#visionСheck').validate({
            rules: {
                name: {
                    required: true,
                    minlength: 4,
                },
                phone: {
                    required: true,
                    minlength: 11,
                }
            },
            messages: {
                name: {
                    required: "Поле не заполнено",
                    minlength: "Минимальное количество символов: 3"
                },
                phone: {
                    required: "Поле не заполнено",
                    minlength: "Минимальное количество символов: 11"
                }
            },
            errorPlacement: function(error, element) {
                error.appendTo( element.parent(".input_wrapper").next("p") );
            }
        });
      };
      formValidate();

      $('.modal_page-form').css('display', 'block');
      $('.modal_page-success').css('display', 'none');
      jQuery("#visionСheck").submit(function() {
        let form = jQuery(this);
        let name = jQuery(this).find('input[name="name"]');
        let phone = jQuery(this).find('input[name="phone"]');
       
        if($('.input_wrapper__input').hasClass('error')) {
            phone.parent().addClass('not-valid');
            name.parent().addClass('not-valid');
          } else {
            $('.modal_page-form').css('display', 'none');
            $('.modal_page-success').css('display', 'block');
            jQuery.ajax({
              type: "POST",
              url: "index.php?route=mail/sendemail/send_form",
              data: form.serialize(),
              dataType: 'json',
              success: function(json) {
                if(json['error']){
                  message.html(json['error']);
                }
                if(json['success']){
                  phone.parent().removeClass('not-valid');
                  name.parent().removeClass('not-valid');
                }
            }
            });
          return false;
          }
      });
      </script>
    </body>
</html>